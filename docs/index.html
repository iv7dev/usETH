<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>usETH | Sustainable high yielding stablecoin backed by a delta neutral staked Ethereum position</title>
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@300;400;600&family=Source+Code+Pro&display=swap" rel="stylesheet"> 
    <style>
      html { background: url(img/bkg.png) no-repeat center center fixed; -webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover; }
      body { font-family: "Source Code Pro", sans-serif; background: #000000EE; color: #CCC; margin: 0px;}
    </style>
  </head>
  <body id="top">
    <div style="max-width: 95%; margin: 0 auto;">
      <div style="display: flex; flex-direction: row; align-items: center; justify-content: center; width: 100%; padding-top: 1%">
        <div style="flex: 1 1 auto; text-align: center; font-size: 1.4em;">usETH</div>
        <div style="flex: 1 1 auto; text-align: center;">TVL: $0m</div>
        <div style="flex: 1 1 auto; text-align: center;"><span style="font-size:0.6em;" class="wallet-address"></span><button id="connect">CONNECT</button></div>
      </div>
      <div style="text-align: center; padding: 5% 0 2% 0;">
        sustainable high yielding stablecoin backed by a delta neutral staked Ethereum position
      </div>
      <div id="app" style="margin: 3% auto; padding: 2% 0; border: 1px solid #444; max-width: 820px;">
        <div style="display: flex; flex-direction: row; align-items: center; justify-content: center; max-width: 800px; margin: 0px auto;">
          <div style="flex: 1 1 auto; text-align: center;">
            <input type="text" id="deposit-amount" placeholder="ETH"  style="text-align: center;" />
            <button id="deposit">DEPOSIT</button> 
          </div>
          <div style="flex: 1 1 auto; text-align: center;">
            <input type="text" id="withdraw-amount" placeholder="usETH" style="text-align: center;" />
            <button id="withdraw">WITHDRAW</button>
          </div>
        </div>
        <div style="max-width: 800px; margin: 20px auto; text-align: center;">
          <table style="width: 100%;">
            <tr><th>Asset</th><th>Balance</th><th>Estimated APR</th></tr>
            <tr><td>ETH</td><td id="eth-balance">0</td><td>0%</td></tr>
            <tr><td>usETH</td><td id="useth-balance">0</td><td>0%</td></tr>
            <tr><td>Staked usETH</td><td id="staked-balance">0</td><td>12.3%</td></tr>
          </table>
        </div>
        <div style="display: flex; flex-direction: row; align-items: center; justify-content: center; max-width: 800px; margin: 0px auto;">
          <div style="flex: 1 1 auto; text-align: center;">
            <input type="text" id="stake-amount" placeholder="usETH"  style="text-align: center;" />
            <button id="stake">STAKE</button> 
          </div>
          <div style="flex: 1 1 auto; text-align: center;">
            <input type="text" id="unstake-amount" placeholder="usETH" style="text-align: center;" />
            <button id="unstake">UNSTAKE</button>
          </div>
        </div>
      </div>
      <div style="text-align: center;">
        <div style="padding: 3% 0 1% 0;">built on the lego bricks of DeFi</div>
        <div style="opacity: 0.5;"><img src="img/lego.svg" style="width: 300px; max-width: 80%;" alt="Lido Finance, Aave, Uniswap, Chainlink" title="Lido Finance, Aave, Uniswap, Chainlink" /></div>
      </div>
      <div style="text-align: center; padding: 5% 0 0 0">
        <a href="https://github.com/jamesbachini/useth" target="_blank" style="color: #CCC;">github</a> | 
        <a href="https://twitter.com/" target="_blank" style="color: #CCC;">@useth</a> | 
        <a href="https://aragon.org/" target="_blank" style="color: #CCC;">dao</a> | 
        <a href="https://rinkeby.etherscan.io/address/0x7B089d4807CbdaA345851094cb5EfF8F5fb5670f" target="_blank" style="font-size: 0.8em; color: #CCC;">0x7B089d4807CbdaA345851094cb5EfF8F5fb5670f</a>
      </div>
      <div style="text-align: center; padding: 1% 0 0 0"><h3><a href="#learn-more" style="color: #CCC;">learn more</a></h3></div>
      <div style="max-width: 800px; margin: auto;" id="learn-more">
        <div style="border: 1px solid #CCC; border-radius: 3px"><br><br><br>Video Coming Soon...</div>
        <h2 id="how-a-delta-neutral-trade-works">how a delta neutral trade works</h2>
        <p>Delta neutral trades have no directional exposure. They have been part of the bread and butter of traditional finance for as long as commodities have traded on futures exchanges.</p>
        <p>It involves buying an asset and then borrowing the same amount of the same asset to short it. The borrowed asset is sold for USD meaning that if the asset price goes up or down it doesnâ€™t matter because the amount owned is the same as the amount borrowed.</p>
        <hr style="width: 50%; margin: 30px auto;">
        <h2 id="enter-lido-s-steth-staked-ethereum">enter lido's stETH staked ethereum</h2>
        <p>Ethereum is migrating from a proof of work algorithm to a proof of stake algorithm which means that holders of ETH can earn a return on their staked assets. LIDO finance has taken this a step further and created an stETH token which represents a position in staked Ethereum in the form of an ERC20 token.</p>
        <p>This becomes more interesting because Aave accepts stETH as collateral on their borrowing and lending platform meaning that we can purchase stETH, use this as collateral to borrow ETH swap this for USDC so we owe as much ETH as we own. Creating a delta neutral position.</p>
        <p>However there is a significant benefit to doing this which is going to be a game changer for DeFi. The stETH that we are using for collateral still earns staking rewards while it is being used to short the same volume of Eth.</p>
        <p>The stETH long will earn around 10% APR (post merge) in staking rewards while borrowing costs are less than 1% on our overcollateralized position.</p>
        <hr style="width: 50%; margin: 30px auto;">
        <h2 id="can-it-be-done-in-a-smart-contract-">can it be done in a smart contract?</h2>
        <p>usETH is an ERC20 token with some additional functionality.</p>
        <ul>
        <li>The deposit function allows a user to send ETH and mint usETH in return</li>
        <li>The withdraw function allows a user to redeem usETH in exchange for their ETH</li>
        <li>The stake function allows a user to commit usETH to the staking pool to earn rewards</li>
        <li>The unstake function releases the usETH and collects the rewards</li>
        </ul>
        <p>With any stablecoin the total supply is not staked at any one time. However with usETH the underlying collateral is always staked meaning that if 50% of users stake their usETH the rewards will be 2x the ETH staking rewards before incentives.</p>
        <p>For many users this will be attractive in itself because it will provide a sustainable return on a position pegged to the USD fully automated and permissionless in a Solidity smart contract.</p>
        <p>A usEth DAO governance token ($USED) will incentivise growth and create bribes to bootstrap a liquidity pool on Uniswap for USDC-usETH.</p>
        <p>Incoming staking rewards will be subject to a small percentage fee which will be directed to the holders of the USED token creating value for the protocol and its future governance.</p>
        <p>All figures are preliminary and subject to change.</p>
        <hr style="width: 50%; margin: 30px auto;">
      </div>

      <div style="text-align: center; margin: 3% auto;">
        <img src="img/explainer_bw.png" alt="usETH Explainer" style="width: 600px; max-width: 80%; opacity: 0.7;" />
      </div>
      <div style="text-align: center;">
        <a href="#top" style="color: #CCC;">back to top</a>
      </div>
    </div>
    
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
    <script>
      const provider = new ethers.providers.Web3Provider(window.ethereum,'any');
      let signer;
      let userAddress;
      let usEth;
      const usEthAbi = [
        "function balanceOf(address) view returns (uint256)",
        "function staked(address) view returns (uint256)",
        "function deposit() payable",
        "function withdraw(uint256 amount)",
        "function stake(uint256 amount)",
        "function unstake(uint256 amount)",
      ];
      const usEthAddress = '0x7B089d4807CbdaA345851094cb5EfF8F5fb5670f';
      
      const updateBalances = async () => {
        const ethBalance = await provider.getBalance(userAddress);
        document.getElementById('eth-balance').innerHTML = ethers.utils.formatEther(ethBalance);
        const usEthBalance = await usEth.balanceOf(userAddress);
        document.getElementById('useth-balance').innerHTML = ethers.utils.formatEther(usEthBalance);
        const stakedBalance = await usEth.staked(userAddress);
        document.getElementById('staked-balance').innerHTML = ethers.utils.formatEther(stakedBalance);     
      }

      const connect = async () => {
        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner()
        usEth = new ethers.Contract(usEthAddress, usEthAbi, signer);
        userAddress = await signer.getAddress();
        const { chainId } = await provider.getNetwork()
        if (chainId !== 4) alert('Please set your network to Rinkeby Testnet');
        document.querySelectorAll('.wallet-address').forEach(el => el.innerHTML = `${userAddress.substr(0,8)}...`);
        document.getElementById('connect').innerHTML = 'CONNECTED';
        window.ethereum.on('accountsChanged', () => { connect() });
        window.ethereum.on('network', () => { connect() });
        await updateBalances();
      }
      document.getElementById('connect').onclick = connect;

      document.getElementById('deposit').onclick = async () => {
        if (!usEth) await connect();
        const weiAmount = ethers.utils.parseEther(document.getElementById('deposit-amount').value);
        document.getElementById('deposit-amount').value = '';
        document.getElementById('deposit').innerHTML = 'SENDING TX...';
        const tx = await usEth.deposit({ value: weiAmount });
        const receipt = await tx.wait();
        document.getElementById('deposit').innerHTML = 'DEPOSIT';
        await updateBalances();
      }

      document.getElementById('withdraw').onclick = async () => {
        if (!usEth) await connect();
        const weiAmount = ethers.utils.parseEther(document.getElementById('withdraw-amount').value);
        document.getElementById('withdraw-amount').value = '';
        document.getElementById('withdraw').innerHTML = 'SENDING TX...';
        const tx = await usEth.withdraw(weiAmount);
        const receipt = await tx.wait();
        document.getElementById('withdraw').innerHTML = 'WITHDRAW';
        await updateBalances();
      }

      document.getElementById('stake').onclick = async () => {
        if (!usEth) await connect();
        const weiAmount = ethers.utils.parseEther(document.getElementById('stake-amount').value);
        document.getElementById('stake-amount').value = '';
        document.getElementById('stake').innerHTML = 'SENDING TX...';
        const tx = await usEth.stake(weiAmount);
        const receipt = await tx.wait();
        document.getElementById('stake').innerHTML = 'STAKE';
        await updateBalances();
      }

      document.getElementById('unstake').onclick = async () => {
        if (!usEth) await connect();
        const weiAmount = ethers.utils.parseEther(document.getElementById('unstake-amount').value);
        document.getElementById('unstake-amount').value = '';
        document.getElementById('unstake').innerHTML = 'SENDING TX...';
        const tx = await usEth.unstake(weiAmount);
        const receipt = await tx.wait();
        document.getElementById('unstake').innerHTML = 'UNSTAKE';
        await updateBalances();
      }
    </script>
  </body>
</html>